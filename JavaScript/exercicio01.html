<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>Arrays e Metódos</h1>

    <section>
        <h2>Boletins</h2>
        <table class="js-tabela">
            <thead>
                <th>Aluno</th>
                <th>Nota 1</th>
                <th>Nota 2</th>
                <th>Nota 3</th>
                <th>Nota 4</th>
                <th>Média</th>
            </thead>
            <tbody>
                <tr class="aluno">
                    <td class="nome">Junior</td>
                    <td class="nota_1">8.5</td>
                    <td class="nota_2">0</td>
                    <td class="nota_3">7.5</td>
                    <td class="nota_4">6.0</td>
                    <td class="media"></td>
                </tr>
                <tr class="aluno">
                    <td class="nome">Rafaella</td>
                    <td class="nota_1">8.5</td>
                    <td class="nota_2">9.0</td>
                    <td class="nota_3">8.4</td>
                    <td class="nota_4">10.0</td>
                    <td class="media"></td>
                </tr>
                <tr class="aluno">
                    <td class="nome">Benjamin</td>
                    <td class="nota_1">8.5</td>
                    <td class="nota_2">9.0</td>
                    <td class="nota_3">10</td>
                    <td class="nota_4">9.5</td>
                    <td class="media"></td>
                </tr>
            </tbody>
        </table>
    </section>


    <script src="Function.js"></script>
    <script>
        let trs = document.querySelectorAll('.js-tabela tbody .aluno');
        
        let i = 0;
        while (trs[i]){
            let linhaAluno = trs[i];
            let tds = linhaAluno.querySelectorAll("td");
            let notas = recuperarNumerosEmColunas(tds)
            let verificar = notas.some(function(nota){
                return nota == 0
            })

            // if(verificar){
            //     var media = "Reprovado";
            // }else{        
            //     var media = calcularMedia.apply(this,notas);
            // }

        // podemos escrever a mesma coisa do 'if/esle' de cima com os operadores ternários. Assim:
            
            let media = verificar ? 'Reprovado' : calcularMedia.apply(this, notas)


            linhaAluno.querySelector('.media').textContent = media;

            i++;
        }

        function recuperarNumerosEmColunas(tds){
            let x = 0
            let numeros = []
            while(tds[x]){
                if( !isNaN( tds[x].textContent) && tds[x].textContent !== ''){
                    numeros.push(parseFloat(tds[x].textContent))
                }
                x++
            }
            return numeros
        }
    </script>

</body>

</html>